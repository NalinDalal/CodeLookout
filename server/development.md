## Create a github App for local development

- Use the following [link](https://docs.github.com/en/apps/creating-github-apps/writing-code-for-a-github-app/quickstart) for reference

- Start following from Step 2 (as we have Go app instead of nodeJS one)

## Run local developement server

- Using docker:

```shell
  docker-compose up
  # run smee client
  ./scripts/run_smeeclient.sh
```

- Non docker:
  `go run cmd/main.go`

```shell
  cd server
  go run cmd/main.go
  # run smee client
  ./scripts/run_smeeclient.sh
```

> Run this smee client to forward github webhooks to development machine

## Update DATABASE_URL when switching bewteen docker and non-docker development

- Use localhost in DATABASE_URL for local dev
  - `postgres://postgres:password@localhost:5432/codelookout`
- Use postgres-db in DATABASE_URL for Docker
  - `postgres://postgres:password@postgres-db:5432/codelookout`
- Ensure the private key is mounted into the container when using Docker

## What `data` folder contains ?

It contains sample data to be used during initial devlopment phase, without worrying about actually feeding data to any AI API.

- `ai-prompt.txt` : Contains sample prompt to be fed to AI
- `ai-review.json`: Sample review JSON generated by AI



## Two ways to connect to the database and running migrations?

- 1. Using Docker (Recommended for consistency)
If you want to use Docker to spin up the PostgreSQL database and run the migrations:
./init_db.sh

Start the PostgreSQL container
Run necessary migrations automatically

- 2. Using Local PostgreSQL
If you already have PostgreSQL installed locally:

Start your PostgreSQL server if it's not already running
Run your Go application:

go run cmd/main.go

Then in a separate terminal run the command ./local_db_migrations.sh

